<!--==================================================
 * File:    index.html
 * Author:  Matthew Christensen
 * Date:    Winter 2018

 * Description: Webpage for the Scriptures, Mapped (Project 1)
*-->
<!DOCTYPE tml>

<html>
<head>
    <meta charset="utf-8">

    <title>The Scriptures, Mapped</title>
    <meta name="description" content="The LDS Standard Works, Mapped">
    <meta name="author" content="Matt Christensen">

    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="javascript/scriptures.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</head>
<body>
    <script>
  // This is called with the results from from FB.getLoginStatus().
  function statusChangeCallback(response) {
    console.log('statusChangeCallback');
    console.log(response);
    // The response object is returned with a status field that lets the
    // app know the current login status of the person.
    // Full docs on the response object can be found in the documentation
    // for FB.getLoginStatus().
    if (response.status === 'connected') {
      // Logged into your app and Facebook.
      testAPI();
    } else {
      // The person is not logged into your app or we are unable to tell.
      document.getElementById('status').innerHTML = 'Please log ' +
        'into this app.';
    }
  }

  // This function is called when someone finishes with the Login
  // Button.  See the onlogin handler attached to it in the sample
  // code below.
  function checkLoginState() {
    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });
  }

  window.fbAsyncInit = function() {
    FB.init({
      appId      : '{194854237785898}',
      cookie     : true,  // enable cookies to allow the server to access
                          // the session
      xfbml      : true,  // parse social plugins on this page
      version    : 'v2.8' // use graph api version 2.8
    });

    // Now that we've initialized the JavaScript SDK, we call
    // FB.getLoginStatus().  This function gets the state of the
    // person visiting this page and can return one of three states to
    // the callback you provide.  They can be:
    //
    // 1. Logged into your app ('connected')
    // 2. Logged into Facebook, but not your app ('not_authorized')
    // 3. Not logged into Facebook and can't tell if they are logged into
    //    your app or not.
    //
    // These three cases are handled in the callback function.

    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });

  };

  // Load the SDK asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "https://connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

  // Here we run a very simple test of the Graph API after login is
  // successful.  See statusChangeCallback() for when this call is made.
  function testAPI() {
    console.log('Welcome!  Fetching your information.... ');
    FB.api('/me', function(response) {
      console.log('Successful login for: ' + response.name);
      document.getElementById('status').innerHTML =
        'Thanks for logging in, ' + response.name + '!';
    });
  }
</script>
    <div id="header">
        <div id="crumb"></div>
        <div id="navchapter"></div>
        <div id="centerhead" class="hidden-xs">
            <div id="title">The Scriptures, Mapped</div>
            <div id="subtitle">By Matthew Christensen</div>
        </div>
        <div id="login">
            <fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
            </fb:login-button>

            <div id="status">
            </div>
        </div>
    </div>
    <div id="content">
        <div id="scriptures">
            <div id="scrip1" class="activescrip">
                <div style="text-align:center;"><button id="previousbtn">previous</button><button id="nextbtn">next</button></div>

                <div class="scripturewrapper">
                    <div class="scripturecontent" title="Scriptures: Alma 6">
                        <div class="chapterheading">The Book of Alma<br><b class="small">The Son of Alma</b></div>
                        <div class="navheading"><div class="divtitle">CHAPTER 6</div></div>
                        <ul class="versesblock">
                            <li id="alma_6.1"><span class="verse">1</span> AND now it came to pass that after Alma had made an end of speaking unto the people of the church, which was established in the city of Zarahemla, he ordained priests and elders, by laying on his hands according to the order of God, to preside and watch over the church.</li>
                            <li id="alma_6.2"><span class="verse">2</span> And it came to pass that whosoever did not belong to the church who repented of their sins were baptized unto repentance, and were received into the church.</li>
                            <li id="alma_6.3"><span class="verse">3</span> And it also came to pass that whosoever did belong to the church that did not repent of their wickedness and humble themselves before God—I mean those who were lifted up in the pride of their hearts—the same were rejected, and their names were blotted out, that their names were not numbered among those of the righteous.</li>
                            <li id="alma_6.4"><span class="verse">4</span> And thus they began to establish the order of the church in the city of Zarahemla.</li>
                            <li id="alma_6.5"><span class="verse">5</span> Now I would that ye should understand that the word of God was liberal unto all, that none were deprived of the privilege of assembling themselves together to hear the word of God.</li>
                            <li id="alma_6.6"><span class="verse">6</span> Nevertheless the children of God were commanded that they should gather themselves together oft, and join in fasting and mighty prayer in behalf of the welfare of the souls of those who knew not God.</li>
                            <li id="alma_6.7"><span class="verse">7</span> And now it came to pass that when Alma had made these regulations he departed from them, yea, from the church which was in the city of Zarahemla, and went over upon the east of the river Sidon, into the valley of Gideon, there having been a city built, which was called the city of Gideon, which was in the valley that was called Gideon, being called after the man who was slain by the hand of Nehor with the sword.</li>
                            <li id="alma_6.8"><span class="verse">8</span> And Alma went and began to declare the word of God unto the church which was established in the valley of Gideon, according to the revelation of the truth of the word which had been spoken by his fathers, and according to the spirit of prophecy which was in him, according to the testimony of Jesus Christ, the Son of God, who should come to redeem his people from their sins, and the holy order by which he was called.  And thus it is written.  Amen.</li>
                        </ul>
                        <div class="navspace"></div>
                        <div class="navheading"></div>
                    </div>
                </div>
            </div>
            <div id="scrip2" style="left: 100%;"></div></div>
        <div id="map"></div>
    </div>
    <script type="text/javascript">
    function ready(eventHandler){
        if (document.attachEvent ? document.readyState === "complete" : document.readState !== "loading") {
            eventHandler();
        } else {
            document.addEventListenser("DOMContentLoaded", eventHandler);
        }
    }
    ready(function () {

        window.addEventListener("hashchange", function () {
            let ids = location.hash.substring(1).split(":");
            if (ids.length < 3) {
                if ($("#scrip1").hasClass("activescrip")) {
                    $("#scrip1").fadeOut(500,scriptures.onHashChanged)
                } else {
                    $("#scrip2").fadeOut(500,scriptures.onHashChanged)
                }
            } else {
                scriptures.onHashChanged();
            }
        });
        scriptures.init(scriptures.onHashChanged);
    });
    // let map;
    function initMap() {
        let uluru = {lat: 31.7683, lng: 35.2137};
        map = new google.maps.Map(document.getElementById('map'), {
          zoom: 7,
          center: uluru
        //   maxZoom: 15
        });
    }
    function showLocation (geotagId, placename, latitude, longitude, viewLatitude, viewLongitude, viewTilt, viewRoll, viewAltitude, viewHeading) {
        scriptures.showLocation(geotagId, placename, latitude, longitude, viewLatitude, viewLongitude, viewTilt, viewRoll, viewAltitude, viewHeading);
    }
    </script>
    <script async defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDuPLtrF4MskjIwthQz0jITvbY3gt3kOH0&callback=initMap">
    </script>
</body>
</html>
